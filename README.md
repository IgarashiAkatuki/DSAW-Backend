# DontSpeakAbsWords
给我好好说话(恼
**最后更新于2022.11.9**

- *****为改动api

- **!**为新增api
- `暂存表`和`持久表`的关系

> 暂存表：当一个词条的**释义**被提交时，这个**释义**会被储存到`暂存表`，此时这个词条不能被`getTranslationsFromPersistence`搜索到。
>
> ​				这个释义每被提交一次，这个**释义**的`like`数就会自增1，当`likes`到达阈值(默认为5)时，该**释义**会被自动转移到`持久表`中，并且可以被`getTranslationsFromPersistence`搜索到。
>
> ​				所以对于一个查询释义的请求，**应该用`getTranslationsFromPersistence`而不是`getTranslationsFromTemp`**	，后者API的用途是**给admin检测管理temp表使用**。

## 常见词语解释

词条：诸如`nms`l，`smdx`，`xswl`等**抽象词**，包括但不限于**拼音/字母缩写，emoji，谐音**

释义：诸如`你妈死了`，`什么东西`，`笑死我了`等**抽象词**的**具体解释**

### 1.returnWords(返回全部词条)

- **URI**：`/returnWords`

- **Method**:`post`
- 请求参数

| 字段 | 说明 | 类型 | 备注       | 是否必填 |
| ---- | ---- | ---- | ---------- | -------- |
| 无   |      |      | 不需要参数 | 否       |

- 返回参数

| 字段 | 说明       | 类型   | 备注 | 是否必填 |
| ---- | ---------- | ------ | ---- | -------- |
| list | 返回的数组 | Object |      | 是       |

**list**

| 字段  | 说明           | 类型   | 备注       | 是否必填 |
| ----- | -------------- | ------ | ---------- | -------- |
| id    | 词条的id       | int    | id全局唯一 | 是       |
| date  | 词条提交的日期 | date   | 可以为null | 否       |
| word  | 词条的内容     | String |            | 是       |
| likes | 词条的like数   | String |            | 是       |

### 2.addWords(添加词条)

- **URI**：`/addWords`

- **Method**:`post`
- 请求参数

| 字段 | 说明       | 类型   | 备注 | 是否必填 |
| ---- | ---------- | ------ | ---- | -------- |
| word | 添加的词条 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                 | 是否必填 |
| ---- | ---------- | ---- | -------------------- | -------- |
| info | 接口状态码 | int  | 成功：1<br />失败：0 | 是       |

### 3.queryWord(查找词条)

- **URI**：`/queryWord`

- **Method**:`post`
- 请求参数

| 字段 | 说明       | 类型   | 备注 | 是否必填 |
| ---- | ---------- | ------ | ---- | -------- |
| word | 查找的词条 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                 | 是否必填 |
| ---- | ---------- | ---- | -------------------- | -------- |
| info | 接口状态码 | int  | 成功：1<br />失败：0 | 是       |

### 4.getRandomQuestionnaire(获得随机词条)

- **URI**：`/getRandomQuestionnaire`

- **Method**:`post`
- 请求参数

| 字段 | 说明 | 类型 | 备注 | 是否必填 |
| ---- | ---- | ---- | ---- | -------- |
| 无   |      |      |      | 否       |

- 返回参数

| 字段 | 说明       | 类型   | 备注                    | 是否必填 |
| ---- | ---------- | ------ | ----------------------- | -------- |
| list | 返回的数组 | Object | list数组的大小最大值为5 | 是       |

- 查询逻辑

> ​		当数据库中**词条(word)**的`likes`属性超过阈值(默认为5)时，这个词条方可被	  `getRandomQuestionnaire`查询到。
>
> ​		当使用`/addword`API提交数据库中已有**词条(word)**时，这个词条的`like`属性会自增1

**list**

| 字段  | 说明           | 类型   | 备注       | 是否必填 |
| ----- | -------------- | ------ | ---------- | -------- |
| id    | 词条的id       | int    | id全局唯一 | 是       |
| date  | 词条提交的日期 | date   | 可以为null | 否       |
| word  | 词条的内容     | String |            | 是       |
| likes | 词条的like数   | String |            | 是       |

### *5.getTranslationsFromTemp(从暂存表获得词条释义)

 ***原名为`getTranslations`**

- **URI**：`/getTranslationsFromTemp`(原为`/getTranslations`)
- **Method**:`post`
- 请求参数

| 字段 | 说明         | 类型   | 备注 | 是否必填 |
| ---- | ------------ | ------ | ---- | -------- |
| word | 要被翻译的词 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型   | 备注                                                     | 是否必填 |
| ---- | ---------- | ------ | -------------------------------------------------------- | -------- |
| list | 返回的数组 | Object |                                                          | 是       |
| info | 接口状态码 | int    | 查询不到结果：0<br />*如果查询到了结果，则不会返回`info` | 否       |

**list**

| 字段        | 说明                 | 类型   | 备注       | 是否必填 |
| ----------- | -------------------- | ------ | ---------- | -------- |
| id          | 释义的id             | int    | id全局唯一 | 是       |
| date        | 词条提交的日期       | date   | 可以为null | 否       |
| word        | 词条的内容           | String |            | 是       |
| translation | 词条的释义           | String |            | 是       |
| likes       | 释义的like数         | int    |            | 是       |
| wordId      | 该释义在其词条内的id | int    | 可以为null | 否       |

### *6.getTranslationsFromPersistence(从持久表中获取词条释义)

- **URI**：`/getTranslationsFromPersistence`
- **Method**:`post`
- 请求参数

| 字段 | 说明         | 类型   | 备注 | 是否必填 |
| ---- | ------------ | ------ | ---- | -------- |
| word | 要被翻译的词 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型   | 备注                                                     | 是否必填 |
| ---- | ---------- | ------ | -------------------------------------------------------- | -------- |
| list | 返回的数组 | Object |                                                          | 是       |
| info | 接口状态码 | int    | 查询不到结果：0<br />*如果查询到了结果，则不会返回`info` | 否       |

**list**

| 字段        | 说明                 | 类型   | 备注       | 是否必填 |
| ----------- | -------------------- | ------ | ---------- | -------- |
| id          | 释义的id             | int    | id全局唯一 | 是       |
| date        | 词条提交的日期       | date   | 可以为null | 否       |
| word        | 词条的内容           | String |            | 是       |
| translation | 词条的释义           | String |            | 是       |
| likes       | 释义的like数         | int    |            | 是       |
| wordId      | 该释义在其词条内的id | int    |            | 否       |

### *7.submitTranslationsToTemp(提交词条释义到暂存表)

***原名为`submitTranslations`**

- **URI**：`/submitTranslationsToTemp`(原为`/submitTranslations`)

- **Method**:`post`
- 请求参数

| 字段        | 说明         | 类型   | 备注 | 是否必填 |
| ----------- | ------------ | ------ | ---- | -------- |
| word        | 要被翻译的词 | String |      | 是       |
| translation | 该词的释义   | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                         | 是否必填 |
| ---- | ---------- | ---- | ---------------------------- | -------- |
| info | 接口状态码 | int  | 提交失败：0<br />提交成功：1 | 是       |

### *8.addLikesToTemp(增加暂存表中释义的Like)

- **URI**：`/addLikesToTemp`

- **Method**:`post`

- 请求参数

| 字段        | 说明             | 类型   | 备注 | 是否必填 |
| ----------- | ---------------- | ------ | ---- | -------- |
| translation | 要增加like的释义 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                         | 是否必填 |
| ---- | ---------- | ---- | ---------------------------- | -------- |
| info | 接口状态码 | int  | 提交失败：0<br />提交成功：1 | 是       |

### *9.addLikesToPersistence(增加暂存表中释义的Like)

- **URI**：`/addLikesToPersistence`

- **Method**:`post`

- 请求参数

| 字段        | 说明             | 类型   | 备注 | 是否必填 |
| ----------- | ---------------- | ------ | ---- | -------- |
| translation | 要增加like的释义 | String |      | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                         | 是否必填 |
| ---- | ---------- | ---- | ---------------------------- | -------- |
| info | 接口状态码 | int  | 提交失败：0<br />提交成功：1 | 是       |

### *10.verifyUser(验证用户身份)

- **URI**：`/verifyUser`

- **Method**:`post`

- 请求参数

| 字段                  | 说明    | 类型    | 备注                            | 是否必填 |
| --------------------- | ------- | ------- | ------------------------------- | -------- |
| username              | 用户名  | String  |                                 | 是       |
| password              | 密码    | String  |                                 | 是       |
| session(不用显示传参) | session | Session | 隐式参数，获取请求的session信息 | 是       |

- 返回参数

| 字段 | 说明       | 类型 | 备注                                                 | 是否必填 |
| ---- | ---------- | ---- | ---------------------------------------------------- | -------- |
| info | 接口状态码 | int  | 用户名/密码错误：0<br />登陆成功：1<br />权限不足：2 | 是       |

### *11.login(登录)

**URI**：`/login`

**说明**：跳转到`/WEB-INF/login`页面

### *12.backstage(后台)

**URI**：`/backstage`

**说明**：跳转到`/WEB-INF/backstage`页面
