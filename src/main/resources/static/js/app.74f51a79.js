(function(){var t={2728:function(t,e,r){"use strict";var a=r(6369),s=function(){var t=this,e=t._self._c;return e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"主页",name:"first"}},[e("h2",[t._v("主页")]),t._v(" 还没有东西呢=v= ")]),e("el-tab-pane",{attrs:{label:"勘误统计",name:"second"}},[e("ErratumList",{attrs:{id:"erratum"}})],1),e("el-tab-pane",{attrs:{label:"来源统计",name:"third"}},[e("SourceList",{attrs:{id:"source"}})],1),e("el-tab-pane",{attrs:{label:"添加释义",name:"fourth"}},[e("AddTranslationForm")],1),e("el-tab-pane",{attrs:{label:"知识图谱",name:"fifth"}},[e("WordGraph")],1)],1)},o=[],l=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"root"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.erratumIsNull,expression:"erratumIsNull"}]},[e("h2",[t._v("勘误为空或发生未知错误")])]),e("div",{attrs:{id:"root"}},[e("h2",[t._v("勘误表")]),e("h3",[t._v("共"+t._s(t.count)+"条数据")]),e("h3",[t._v("共"+t._s(t.count)+"条数据/最后更新于"+t._s(t.latest))]),e("hr"),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.erratum,stripe:"true",border:"true"}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"220"}}),e("el-table-column",{attrs:{prop:"date",label:"日期",width:"300"}}),e("el-table-column",{attrs:{prop:"word",label:"词条",width:"239"}}),e("el-table-column",{attrs:{prop:"translation",label:"翻译",width:"220"}}),e("el-table-column",{attrs:{prop:"reason",label:"原因",width:"300"}}),e("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.modifyTransl(r)}}},[t._v("修改释义")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteTransl(r)}}},[t._v("删除释义")])]}}])})],1)],1),e("hr")])},n=[],i=r(5939),u=r(5410),c=r.n(u),d={name:"ErratumList",data(){return{erratum:{},erratumIsNull:!1,count:0,latest:0}},computed:{},methods:{deleteTransl(t){let e=confirm("您是否要删除["+t.row.word+"]的释义["+t.row.translation+"]");e&&i.Z.post("https://project.midsummra.com/admin/deleteTranslation",c().stringify({id:t.row.id,word:t.row.word,translation:t.row.translation})).then((e=>{0!==e.data.code?this.$message({showClose:!0,message:"删除释义失败["+e.data.message+"]",type:"error"}):(this.erratum.splice(t.$index,1),this.$message({showClose:!0,message:"删除释义成功",type:"success"}))}))},modifyTransl(t){let e=prompt("请输入修改后的释义");null!==e&&i.Z.post("https://project.midsummra.com/admin/updateTranslation",c().stringify({id:t.row.id,word:t.row.word,translation:t.row.translation,newTranslation:e})).then((e=>{0!==e.data.code?(console.log(e.data),this.$message({showClose:!0,message:"修改释义失败["+e.data.message+"]",type:"error"})):(this.erratum.splice(t.$index,1),this.$message({showClose:!0,message:"修改释义成功",type:"success"}))}))}},mounted(){i.Z.get("https://project.midsummra.com/admin/erratumInfo").then((t=>{0===t.data.code&&null===t.data.data?this.erratumIsNull=!1:0===t.data.code?(this.erratum=t.data.data,this.count=this.erratum.length,this.latest=this.erratum[this.erratum.length-1].date):this.erratumIsNull=!0}))}},m=d,h=r(1001),p=(0,h.Z)(m,l,n,!1,null,"0ec1455a",null),f=p.exports,b=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"root"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sourceIsNull,expression:"sourceIsNull"}]},[e("h2",[t._v("来源为空或发生未知错误")])]),e("div",{attrs:{id:"root"}},[e("h2",[t._v("来源统计表")]),e("h3",[t._v("共"+t._s(t.count)+"条数据/最后更新于"+t._s(t.latest))]),e("hr"),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.source,stripe:"true",border:"true"}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"199"}}),e("el-table-column",{attrs:{prop:"date",label:"日期",width:"300"}}),e("el-table-column",{attrs:{prop:"translation",label:"翻译",width:"220"}}),e("el-table-column",{attrs:{prop:"source",label:"出处",width:"220"}}),e("el-table-column",{attrs:{prop:"url",label:"出处url",width:"320"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e("p",[t._v(t._s(t.deserializationURL(r.row.url)))]),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(r.row.url))])],1)])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.submitSource(r,null)}}},[t._v("认可出处")]),e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.submitSource(r,r.row.url)}}},[t._v("认可出处与URL")])]}}])})],1)],1),e("hr")])},v=[],w={name:"SourceList",data(){return{source:{},sourceIsNull:!1,count:0,latest:0}},methods:{deserializationURL(t){return null===t?"----url为空----":t.replaceAll("_","/").replaceAll("-",".")},submitSource(t,e){let r=confirm("您是否要认可["+t.row.translation+"]的出处["+t.row.source+"]及其url["+e+"]");r&&i.Z.post("https://project.midsummra.com/admin/submitSource",c().stringify({id:t.row.id,translation:t.row.translation,source:t.row.source,url:e})).then((e=>{0!==e.data.code?this.$message({showClose:!0,message:"提交出处失败["+e.data.message+"]",type:"error"}):(this.source.splice(t.$index,1),this.$message({showClose:!0,message:"提交出处成功",type:"success"}))}))}},mounted(){i.Z.get("https://project.midsummra.com/admin/sourceInfo").then((t=>{0===t.data.code&&null===t.data.data?this.sourceIsNull=!1:0===t.data.code?(this.source=t.data.data,this.count=this.source.length,this.latest=this.source[this.source.length-1].date):this.sourceIsNull=!0}))}},g=w,y=(0,h.Z)(g,b,v,!1,null,"c58a9c66",null),_=y.exports,k=function(){var t=this,e=t._self._c;return e("div",[e("hr"),e("h2",[t._v("      添加释义")]),e("el-form",{ref:"form",attrs:{"label-width":"80px",rules:t.rules,model:t.form}},[e("el-form-item",{staticClass:"param",attrs:{label:"词语",prop:"notNull"}},[e("el-input",{staticStyle:{width:"50%"},model:{value:t.form.word,callback:function(e){t.$set(t.form,"word",e)},expression:"form.word"}})],1),e("el-form-item",{staticClass:"param",attrs:{label:"释义",prop:"notNull"}},[e("el-input",{staticStyle:{width:"50%"},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),e("el-form-item",{staticClass:"param",attrs:{label:"来源"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"非必需，可不填"},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}})],1),e("el-form-item",{staticClass:"param",attrs:{label:"URL"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"非必需，可不填"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),e("div",{attrs:{id:"button"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitTransl}},[t._v("添加释义")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearForm}},[t._v("清空表单")])],1)],1),e("hr")],1)},S=[],x={name:"AddTranslationForm",data(){return{form:{word:"",translation:"",source:"",url:""},rules:{notNull:[]}}},methods:{submitTransl(){null===this.form.word||""===this.form.word||null===this.form.translation||""===this.form.translation?alert("词条或释义为空！"):i.Z.post("https://project.midsummra.com/admin/submitTranslToPS",c().stringify({word:this.form.word,translation:this.form.translation,source:this.form.source,url:this.form.url})).then((t=>{0===t.data.code?this.$message({showClose:!0,message:"提交释义成功",type:"success"}):this.$message({showClose:!0,message:"修改释义失败["+t.data.message+"]",type:"error"})}))},clearForm(){this.form.url="",this.form.word="",this.form.translation="",this.form.source=""}}},N=x,T=(0,h.Z)(N,k,S,!1,null,"46936948",null),C=T.exports,O=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"root"}},[e("form",{attrs:{action:"",id:"input"}},[e("el-input",{attrs:{size:"medium",placeholder:"请输入内容"},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}}),e("br"),e("br"),e("el-button",{attrs:{size:"",type:"success"},on:{click:function(e){return t.generateGraph()}}},[t._v("查询")]),e("hr")],1),e("div",{attrs:{id:"graph"}})])},j=[],z=r(5709),I={name:"WordGraph",data(){return{graphData:{nodes:[],edges:[]},val:""}},methods:{generateGraph(){$.ajax({url:"https://project.midsummra.com/api/generateGraph",type:"POST",dataType:"JSON",data:{val:this.val},success:t=>{console.log(t),0===t.data.code?this.$message({showClose:!0,message:"查询图谱失败>A<",type:"error"}):(this.$message({showClose:!0,message:"图谱生成成功>w<",type:"success"}),this.graphData.nodes=t.data[0],this.graphData.edges=t.data[1])},error:()=>{this.$message({showClose:!0,message:"发生未知错误;w;",type:"error"})},complete:()=>{if($("#graph").empty(),!this.graphData.nodes.isEmpty){this.graphData.nodes.forEach((t=>{switch(t.style||(t.style={}),t.class){case"word":t.size=50,t.style.fill="#f0f8ff";break;case"translation":t.size=55,t.style.fill="lightblue";break;case"source":t.size=80,t.style.fill="#FFB7C5";break}}));var t=new z.ZP.Graph({fitView:!0,fitViewPadding:[20,40,50,20],container:"graph",width:3e3,height:2e3,defaultNode:{size:50},defaultEdge:{type:"line",style:{endArrow:!0,stroke:"#ffb8c6",lineWidth:1.5,strokeOpacity:10}},layout:{type:"force2",animate:!1,center:[0,0],linkDistance:120,nodeStrength:t=>"word"===t.class?600:1e3,preventOverlap:!0,nodeSize:60},modes:{default:["drag-canvas","zoom-canvas","drag-node",{type:"activate-relations",trigger:"click"}]}});t.on("afteractivaterelations",(t=>{console.log(t.item),console.log(t.action)})),t.data(this.graphData),t.render()}}})}},mounted(){$("#graph").empty()}},Z=I,L=(0,h.Z)(Z,O,j,!1,null,"1babcf3e",null),A=L.exports,F={name:"App",data(){return{activeName:"first"}},methods:{},components:{AddTranslationForm:C,ErratumList:f,SourceList:_,WordGraph:A}},P=F,D=(0,h.Z)(P,s,o,!1,null,"443b291e",null),E=D.exports,G=r(8499),R=r.n(G);a["default"].config.productionTip=!1,a["default"].use(R()),new a["default"]({render:t=>t(E)}).$mount("#app")},4654:function(){}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,o){if(!a){var l=1/0;for(c=0;c<t.length;c++){a=t[c][0],s=t[c][1],o=t[c][2];for(var n=!0,i=0;i<a.length;i++)(!1&o||l>=o)&&Object.keys(r.O).every((function(t){return r.O[t](a[i])}))?a.splice(i--,1):(n=!1,o<l&&(l=o));if(n){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,s,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,l=a[0],n=a[1],i=a[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(i)var c=i(r)}for(e&&e(a);u<l.length;u++)o=l[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(c)},a=self["webpackChunkbackstage"]=self["webpackChunkbackstage"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(2728)}));a=r.O(a)})();
//# sourceMappingURL=app.74f51a79.js.map